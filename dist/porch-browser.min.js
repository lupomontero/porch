var porch;(()=>{"use strict";var e={d:(t,r)=>{for(var s in r)e.o(r,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:r[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{createPromise:()=>i,createStream:()=>n,default:()=>o});const r=(e,t)=>e.reduce(((e,r)=>e.length&&e[e.length-1].length<t?(e[e.length-1].push(r),e):[...e,[r]]),[]);class s{constructor(){this.readable=!0,this.listeners={}}getListeners(e){return this.listeners[e]||[]}on(e,t){return Object.assign(this.listeners,{[e]:this.getListeners(e).concat(t)}),this}off(e,t){return Object.assign(this.listeners,{[e]:this.getListeners(e).filter((e=>e!==t))}),this}emit(e,t){setTimeout((()=>{this.getListeners(e).forEach((e=>e(t)))}))}push(e){return null===e?this.emit("end"):this.emit("data",e)}}const n=(e,t=1,n=0,i=!0)=>{const o=new s({objectMode:!0,read(){}});let l=!1;const a=e=>!l&&o.readable&&o.push(e),c=(e,r=0)=>e.length?Promise.all(e[0].map(((e,s)=>{const n=r*t+s;return e().then((e=>a({idx:n,result:e}))).catch((e=>i?(e=>{l=!0,o.emit("error",e)})(Object.assign(e,{idx:n})):a({idx:n,result:e})))}))).then((()=>e.length<=1?a(null):setTimeout((()=>!l&&o.readable&&c(e.slice(1),r+1)),n))):a(null);return c(r(e,t)),o},i=(e,t,s=0,n=!0)=>{const i=(e,t=[])=>e.length?Promise.all(e[0].map((e=>n?e():e().catch((e=>e))))).then((r=>{const n=[...t,...r];return e.length<=1?n:new Promise(((t,r)=>setTimeout((()=>i(e.slice(1),n).then(t,r)),s)))})):Promise.resolve(t);return i(r(e,t))},o=i;porch=t})();